const TRANSLATIONS = {
    en: {
        // App Title
        appTitle: "Daily Planner",

        // Sidebar
        home: "Home",
        tasks: "Tasks",
        projects: "Projects",
        books: "Books",
        languages: "Languages",
        progress: "Progress",
        settings: "Settings",
        loading: "Loading...",
        guest: "Guest",
        login: "Login",
        signup: "Sign Up",
        logout: "Logout",
        signedInAs: "Signed in as",

        // Headers
        dashboard: "Dashboard",
        pickLanguage: "Pick a Language",

        // Hero
        welcome: "Welcome,",
        heroSubtitle: "Let's be productive today.",

        // Settings
        preferences: "Preferences",
        username: "Username",
        theme: "Theme",
        switchTheme: "Switch Theme",
        clearData: "Clear All Data",

        // Common
        welcomeBack: "Welcome back",
        fillAllFields: "Fill all fields",
        loggedOut: "Logged out",
        lessonCompleted: "Lesson Completed!",

        // Views
        tasksView: "Tasks",
        booksView: "Books",
        languagesView: "Languages",

        // Language Section
        levels: "Levels",
        beginnerToAdvanced: "Beginner to Advanced",
        back: "Back",
        backToLevels: "Back to Levels",
        backToPlan: "Back to Plan",
        start: "Start",
        completed: "Completed",
        clickToStart: "Click to start lesson",
        overview: "Overview",
        dialogue: "Dialogue",
        keyTakeaways: "Key Takeaways",
        markCompleted: "Mark as Completed",

        // Tasks
        addTask: "Add a new task...",
        addBtn: "Add Task",
        filterAll: "All",
        filterPending: "Pending",
        filterCompleted: "Completed",
        searchTasks: "Search tasks...",

        // Categories
        catPersonal: "Personal",
        catWork: "Work",
        catLearning: "Learning",
        catFun: "Fun",

        // Priorities
        prioHigh: "High",
        prioMedium: "Medium",
        prioLow: "Low",

        // Auth Forms
        email: "Email",
        password: "Password",
        fullName: "Full Name",
        createAccount: "Create Account",
        register: "Register",
        newUser: "New user?",
        alreadyAccount: "Already have an account?",
        loginHere: "Login here",
        registerHere: "Register here",

        // Messages
        pleaseLogin: "Please login to access courses.",
        emailExists: "Email already registered.",
        regSuccess: "Registration successful! Please login.",
        invalidCreds: "Invalid email or password."
    },
    fr: {
        appTitle: "Planificateur",
        home: "Accueil",
        tasks: "Tâches",
        projects: "Projets",
        books: "Livres",
        languages: "Langues",
        progress: "Progrès",
        settings: "Paramètres",
        loading: "Chargement...",
        guest: "Invité",
        login: "Connexion",
        signup: "S'inscrire",
        logout: "Déconnexion",
        signedInAs: "Connecté en tant que",
        dashboard: "Tableau de bord",
        pickLanguage: "Choisir une langue",

        welcome: "Bienvenue,",
        heroSubtitle: "Soyons productifs aujourd'hui.",
        preferences: "Préférences",
        username: "Nom d'utilisateur",
        theme: "Thème",
        switchTheme: "Changer de thème",
        clearData: "Effacer les données",
        welcomeBack: "Bon retour",
        fillAllFields: "Remplir tous les champs",
        loggedOut: "Déconnecté",
        lessonCompleted: "Leçon terminée !",
        tasksView: "Tâches",
        booksView: "Livres",
        languagesView: "Langues",
        levels: "Niveaux",
        beginnerToAdvanced: "Débutant à Avancé",
        back: "Retour",
        backToLevels: "Retour aux niveaux",
        backToPlan: "Retour au plan",
        start: "Commencer",
        completed: "Terminé",
        clickToStart: "Cliquez pour commencer",
        overview: "Aperçu",
        dialogue: "Dialogue",
        keyTakeaways: "Points clés",
        markCompleted: "Marquer comme terminé",
        addTask: "Ajouter une tâche...",
        addBtn: "Ajouter",
        filterAll: "Tout",
        filterPending: "En attente",
        filterCompleted: "Terminé",
        searchTasks: "Rechercher...",
        catPersonal: "Personnel",
        catWork: "Travail",
        catLearning: "Apprentissage",
        catFun: "Loisir",
        prioHigh: "Haute",
        prioMedium: "Moyenne",
        prioLow: "Basse",

        email: "Email",
        password: "Mot de passe",
        fullName: "Nom complet",
        createAccount: "Créer un compte",
        register: "S'inscrire",
        newUser: "Nouvel utilisateur ?",
        alreadyAccount: "Déjà un compte ?",
        loginHere: "Se connecter",
        registerHere: "S'inscrire ici",

        pleaseLogin: "Veuillez vous connecter pour accéder aux cours.",
        emailExists: "Email déjà enregistré.",
        regSuccess: "Inscription réussie ! Veuillez vous connecter.",
        invalidCreds: "Email ou mot de passe invalide."
    },
    ar: {
        appTitle: "المخطط اليومي",
        home: "الرئيسية",
        tasks: "المهام",
        projects: "المشاريع",
        books: "الكتب",
        languages: "اللغات",
        progress: "التقدم",
        settings: "الإعدادات",
        loading: "جاري التحميل...",
        guest: "زائر",
        login: "دخول",
        signup: "تزجيل",
        logout: "خروج",
        signedInAs: "مسجل باسم",
        dashboard: "لوحة التحكم",
        pickLanguage: "اختر لغة",

        welcome: "مرحباً،",
        heroSubtitle: "دعونا نكون منتجين اليوم.",
        preferences: "تفضيلات",
        username: "اسم المستخدم",
        theme: "السمة",
        switchTheme: "تغيير السمة",
        clearData: "محو البيانات",
        welcomeBack: "مرحبا بعودتك",
        fillAllFields: "املأ جميع الحقول",
        loggedOut: "تم الخروج",
        lessonCompleted: "تم إكمال الدرس!",
        tasksView: "المهام",
        booksView: "الكتب",
        languagesView: "اللغات",
        levels: "المستويات",
        beginnerToAdvanced: "مبتدئ إلى متقدم",
        back: "رجوع",
        backToLevels: "رجوع للمستويات",
        backToPlan: "رجوع للخطة",
        start: "ابدأ",
        completed: "مكتمل",
        clickToStart: "انقر للبدء",
        overview: "نظرة عامة",
        dialogue: "حوار",
        keyTakeaways: "النقاط الرئيسية",
        markCompleted: "تحديد كمكتمل",
        addTask: "إضافة مهمة جديدة...",
        addBtn: "إضافة",
        filterAll: "الكل",
        filterPending: "قيد الانتظار",
        filterCompleted: "مكتمل",
        searchTasks: "بحث عن مهام...",
        catPersonal: "شخصي",
        catWork: "عمل",
        catLearning: "تعلم",
        catFun: "ترفيه",
        prioHigh: "عالية",
        prioMedium: "متوسطة",
        prioLow: "منخفضة",

        email: "البريد الإلكتروني",
        password: "كلمة المرور",
        fullName: "الاسم الكامل",
        createAccount: "إنشاء حساب",
        register: "تسجيل",
        newUser: "مستخدم جديد؟",
        alreadyAccount: "لديك حساب بالفعل؟",
        loginHere: "دخول من هنا",
        registerHere: "سجل من هنا",

        pleaseLogin: "الرجاء تسجيل الدخول للوصول إلى الدورات.",
        emailExists: "البريد الإلكتروني مسجل بالفعل.",
        regSuccess: "تم التسجيل بنجاح! الرجاء تسجيل الدخول.",
        invalidCreds: "البريد الإلكتروني أو كلمة المرور غير صحيحة."
    }
};

const I18n = {
    currentLang: 'en',

    // Initialize
    init() {
        // Load from storage or default
        const saved = localStorage.getItem('app_language');
        if (saved && TRANSLATIONS[saved]) {
            this.setLanguage(saved);
        } else {
            this.setLanguage('en');
        }
    },

    // Set Language
    setLanguage(langCode) {
        if (!TRANSLATIONS[langCode]) return;

        this.currentLang = langCode;
        localStorage.setItem('app_language', langCode);

        // Update Document Attributes
        document.documentElement.lang = langCode;
        if (langCode === 'ar') {
            document.documentElement.setAttribute('dir', 'rtl');
            document.body.classList.add('rtl');
        } else {
            document.documentElement.setAttribute('dir', 'ltr');
            document.body.classList.remove('rtl');
        }

        // Sync Selector
        const selector = document.getElementById('lang-selector');
        if (selector) selector.value = langCode;

        // Update All Text
        this.updatePageContent();

        // Re-render current dynamic view if needed (simple reload or event trigger)
        window.dispatchEvent(new CustomEvent('languageChanged', { detail: { lang: langCode } }));
    },

    get(key) {
        return TRANSLATIONS[this.currentLang][key] || key;
    },

    updatePageContent() {
        const elements = document.querySelectorAll('[data-i18n]');
        elements.forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (this.currentLang && TRANSLATIONS[this.currentLang][key]) {
                // If it's an input with placeholder
                if (el.tagName === 'INPUT' && el.getAttribute('placeholder')) {
                    el.setAttribute('placeholder', TRANSLATIONS[this.currentLang][key]);
                } else {
                    el.innerText = TRANSLATIONS[this.currentLang][key];
                }
            }
        });
    }
};

// Global Rename for compatibility if needed, but App uses LanguageManager
window.LanguageManager = I18n;
